<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--
Template Name: News Magazine
Author: <a href="http://www.os-templates.com/">OS Templates</a>
Author URI: http://www.os-templates.com/
Licence: Free to use under our free template licence terms
Licence URI: http://www.os-templates.com/template-terms
-->
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
 <meta charset="utf-8">
<style>@charset 'UTF-8'</style>
<title>Portal Info</title>
<meta http-equiv="Content-Type" content="text/html; Content-Type: text/html; charset=UTF-8 " />
 <meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="app/Template/news-magazine/layout/styles/layout.css" type="text/css" />
   
<script type="text/javascript" src="app/Template/news-magazine/layout/scripts/jquery.min.js"></script>
<!-- Homepage Specific -->
<script type="text/javascript" src="http://js.nicedit.com/nicEdit-latest.js"></script>
<script type="text/javascript" src="app/Template/news-magazine/layout/scripts/galleryviewthemes/jquery.easing.1.3.js"></script>
<script type="text/javascript" src="app/Template/news-magazine/layout/scripts/galleryviewthemes/jquery.timers.1.2.js"></script>
<script type="text/javascript" src="app/Template/news-magazine/layout/scripts/galleryviewthemes/jquery.galleryview.2.1.1.min.js"></script>
<script type="text/javascript" src="app/Template/news-magazine/layout/scripts/galleryviewthemes/jquery.galleryview.setup.js"></script>
  <script src="https://cdn.tiny.cloud/1/no-api-key/tinymce/5/tinymce.min.js" referrerpolicy="origin"></script>

 <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">

<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
  <link rel="stylesheet" href="/resources/demos/style.css">
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
  


	
  
<link rel="stylesheet" href="app/Template/news-magazine/estrutura.css" type="text/css" />
<style>
a:hover{
 color:#666666;

}
p{font-size:18px;}
#tituloPost{font-size:18px;}

<!--  hovecss da tabela -->
	thead th {
		background: grey;
	}
	tbody tr{
		background:#fffff
	}
	.over {
		background: grey;
	}
<!-- fim hovecss da tabela -->

</style>
<!--  Homepage Specific -->


<script>

//#################
function preencherCampoEditar(id , tipo){

   $.ajax({
        type: 'POST',
        url: "http://localhost/php mvc com PDO TESTE/app/Controller/ComentarioController.php",
        dataType: 'html',
        beforeSend: function () {
        },
        data: {id: id , tipoo:tipo},
        success: function (msg){
			if(tipo=='editarPrincipal'){
			
				$('#comentario'+id).val(msg);
		}
		
			if(tipo=='editarResposta'){
			
				$('#comentari'+id).val(msg);
		}
		//window.location.href = "http://localhost/php mvc com PDO TESTE/?pagina=admin&metodo=create";
          
		  
		
	  }
    });
	
	
	
	}

//##########################

//jquey ativa o css para funcionar na tabela
function editarCment(id_comentario){

	if($('#name_user').val()== $('#user').val() )
	{
		abrirDiv(id_comentario);
	
	}
	else
	{
	aler('Somente seu comentário');	
		
	}
	
	
}
//função inicia o campo tipo para que o cadastro ocorra mesmo depois de o usuário ter clicado no botão editar
function limparCampo(dados){
	
	var userp = $('#user').val();
	var user=$('#usuario'+dados).val();
	var tipo=$('#tipo'+dados).val();
	
	if(userp !=""){
		
		
		if(tipo=='principal'+dados){
		
			abrirDiv(dados);
		} if(tipo=='editarPrincipal'){
			$('#tipo'+dados).val('principal'+dados);
				abrirDiv(dados);
					$('#comentario'+dados).val('');
			
		} if(tipo=='resposta'+dados){
			$('#comentario'+dados).val('');
			abrirDiv(dados);	
			
		} if(tipo=='editarResposta'){
			$('#tipo'+dados).val('resposta'+dados);
			
		$('#comentari'+dados).val('');
		
				abrirDiv(dados);
		}
	}else{
	alert('Tem que logar para comentar');	
		
	}

	
}
//fim
function editarRespCment(id_comentario){
	id= document.getElementById(el).style.display = 'block';

	if($('#name_user').val()== $('#user').val())
	{
		abrirDiv(id_comentario);
		
		
	}
	else
	{
	alert('Somente seu comentário');	
		
	}
	
	
}



//abrir e fechar div de acordo com o id ao clicar no botão responder adminPublicacao abre se tiver usuario logado
/*ao clicar no botão editar no cometário  pega função preencherCampoEditar , que enviar   intenção do comentario se é resposta da resposta ou comentário principal*/
function editar(dados){

	var userp = $('#user').val();
	var user=$('#usuario'+dados).val();
	var tipo=$('#tipo'+dados).val();
	
	if(userp==user){
		abrirDiv(dados);
		if(tipo=='principal'+dados){
			$('#tipo'+dados).val('editarPrincipal');
			 preencherCampoEditar(dados , $('#tipo'+dados).val());
			
		}
		if(tipo=='resposta'+dados){
			$('#tipo'+dados).val('editarResposta');
			 preencherCampoEditar(dados , $('#tipo'+dados).val());
			
			
		}
		
	
	}else{
	alert('não é mesmo usuario do comentário');	
		
	}
/*	
	id=document.getElementById(dados).value='editarPrincipal';
	alert(user);
*/
}





function abrirDiv(el){
	
//	limparCampo(el);
	if($('#name_user').val()!= ""){

	
	
	if (document.getElementById(el).style.display=='none'){
		 document.getElementById(el).style.display = 'block';
		 
	 }else{
		document.getElementById(el).style.display = "none"; 
		 
	}
	
	
	}else{alert('Tem que logar para responder');}
		

}
//fim função abrir e fechar div de acordo com o id da linha
	$(function(){
			$('tbody tr')
				.mouseover(function(){
					$(this).addClass('over');
				})
				.mouseout(function(){
					$(this).removeClass('over');
				});
		});

//#################
function cadAssunto(){
	
    var assunto = $("#ti").val();
	
    if(assunto == ""){alert('Informe um assunto para cadastar');
	assunto = "";
	 $(".ti").focus();
		}
        else{
    $.ajax({
        type: 'POST',
        url: "http://localhost/php mvc com PDO TESTE/app/Controller/AdminController.php",
        dataType: 'html',
        beforeSend: function () {
        },
        data: {assunto:assunto},
        success: function (msg){
		 $("#ti").val("");
		window.location.href = "http://localhost/php mvc com PDO TESTE/?pagina=admin&metodo=create";
          
		  
		
	  }
    });
	}
	
	
	}

//##########################



//função cort texto conteudo da paginacreate
	function principal(){
		
		
var target = $('.principal');
var limit = 150;
var textLimited  ="";
var textLenght = "";
 
target.each(function() {
    textLenght = $(this).text().length;
 
    if (textLenght > limit) {
        textLimited = $(this).text();
        $(this).text(textLimited.substr(0, limit) + '[...]');
    }
});	

	}



//fim cort texto conteudo da paginacreate

// bloco remove resposta comentario e principal
function removerComentPrimario(dado){
	if($('#name_user').val()==""){alert("Tem que logar antes");
	}
	else{
	var Comentarioprincipal="comentarioPrincipal";
	var id = $('#postagem').val();
 
if(confirm('Remover?')){
	window.location.href = "http://localhost/php mvc com PDO TESTE/?pagina=comentario&metodo=removeComentario&id="+dado+"&tipo="+Comentarioprincipal+"&postagem="+id;



}} }

function removerComentResposta(dado){
	if($('#name_user').val()==""){alert("Tem que logar antes");}
	else{
	var primario="comentarioResposta";
 var id = $('#postagem').val();
if(confirm('Remover?')){
	window.location.href = "http://localhost/php mvc com PDO TESTE/?pagina=comentario&metodo=removeComentario&id="+dado+"&tipo="+primario+"&postagem="+id;


}} }
 //fim bloco remove resposta comentario e principal	
	
	
	//caixa dialog arearestrita
function confirmacao(id) {

if(confirm('Tem certeza de  Excluir?')){
	window.location.href = "http://localhost/php mvc com PDO TESTE/?pagina=admin&metodo=delete&id="+id;

}}
//CARREGA PÁGINA DEOPIS QUE TUDO ESTIVER CARREGADO 



$(document).ready(function () {
	
	
	
	
//SETA IMAGEM AO MUDAR DE ARQUIVO PAGINA CRATE E UPDATE
$('#imagem').change(function(){
		const file = $(this)[0].files[0];
		
	const fileReader = new FileReader();
	fileReader.onloadend = function(){
		$('#prev').attr('src',fileReader.result);
	
	}
	fileReader.readAsDataURL(file);
	});
	//FIM SETA IMAGEM AO MUDAR DE ARQUIVO
	
//$('#editor1').ckeditor();

 
                // Replace the <textarea id="editor1"> with a CKEditor 4
                // instance, using default configuration.
                
            
$(window).load(function() {
     document.getElementById("loading").style.display = "none";
     document.getElementById("tudo").style.display = "inline";
});
//##################


$(".imgl").on("click", function(){
          
verificar($('#ti').val());
});



$("#submit").on("click", function(){
    //aviso se o usuario for comentar e não estiver logado       
if($('#user').val()== ""){
		
		alert('Tem que logar para comentar ');
	}
});

//fim


//criar aditor no text area 



/*
 bkLib.onDomLoaded(function() {
      //  new nicEditor({maxHeight : 200}).panelInstance('area');
        new nicEditor({fullPanel : true,maxHeight : 500}).panelInstance('comentari');
  });
  */
  
  
  //##########################################
// assim que pagina é iniciada ativa a contagem de caracteres nos inputs pagina create
$(document).on("input", "#titulo", function() {
	var limite = 100;
    var informativo = "caracteres restantes.";
    var caracteresDigitados = $(this).val().length;
    var caracteresRestantes = limite - caracteresDigitados;

    if (caracteresRestantes <= 0) {
        var comentario = $("input[name=titulo]").val();
        $("textarea[name=titulo]").val(comentario.substr(0, limite));
        $(".caractere").text("0 " + informativo);
    } else if (caracteresRestantes >= 16) {
		$( ".caractere" ).css( "color", "#000000" );
        $(".caractere").text(caracteresRestantes + " " + informativo); 
	} else if (caracteresRestantes >= 0 && caracteresRestantes <= 15) {
		$( ".caractere" ).css( "color", "red" );
        $(".caractere").text(caracteresRestantes + " " + informativo); 
	} else {
		$(".caractere").text(caracteresRestantes + " " + informativo);
	}
});






$(document).on("input", "#comentario", function() {
	var limite = 5000;
    var informativo = "caracteres restantes.";
    var caracteresDigitados = $(this).val().length;
    var caracteresRestantes = limite - caracteresDigitados;

    if (caracteresRestantes <= 0) {
        var comentario = $("textarea[name=comentario]").val();
        $("textarea[name=comentario]").val(comentario.substr(0, limite));
        $(".caracteres").text("0 " + informativo);
    } else if (caracteresRestantes >= 16) {
		$( ".caracteres" ).css( "color", "#000000" );
        $(".caracteres").text(caracteresRestantes + " " + informativo); 
	} else if (caracteresRestantes >= 0 && caracteresRestantes <= 15) {
		$( ".caracteres" ).css( "color", "red" );
        $(".caracteres").text(caracteresRestantes + " " + informativo); 
	} else {
		$(".caracteres").text(caracteresRestantes + " " + informativo);
	}
}); 
//---------------------


//funçao principal e reiniciada assim que abre pagina
			principal();
			$( "#dialog" ).hide();
			
			});
			//-----------------
	//Abre caixa de dialog quando se clica no botão area restrita	

function abrirCad(){
	
  $( "#cadUser" ).dialog({
      modal: true,
      buttons: {
        Ok: function() {
		location.href="http://localhost/php mvc com PDO TESTE/?pagina=admin&metodo=index"
          $( this ).dialog( "close" );
        }
      }
    }); }

//---------------------------------------	
function abrir(){
	
  $( "#dialog" ).dialog({
      modal: true,
      buttons: {
        Ok: function() {
		location.href="http://localhost/php mvc com PDO TESTE/?pagina=admin&metodo=index"
          $( this ).dialog( "close" );
        }
      }
    }); }
 	//caixa dialog arearestrita
		</script>
</head>


<body id="top">

<!--  loader  -->
<div id="loading" style=" display: block;margin-left:22%;">
    <img src="app/loading-icon-animated-gif-19.jpg"/>
</div><!-- FIM loader  -->
<div style="display:none;"id="tudo">


<div class="wrapper col0">
  <div id="topline">
    <!--<p>Tel: xxxxx xxxxxxxxxx | E-Mail: info@domain.com</p>-->
    <ul>
     <!-- <li><a href="#">Libero</a></li>
      <li><a href="#">Maecenas</a></li>
      <li><a href="#">Mauris</a></li>-->
      <li  class="last"><a onclick="abrir();" href="#">Restrito</a></li>
    </ul>
    <br class="clear" />
  </div>
</div>
<!--#####################################################################################################-->

<div class="wrapper col2">
  <div id="topbar">
    <div id="topnav">
      <ul>
        <li class="active"><a href="http://localhost/php mvc com PDO TESTE">Home</a></li>
        <li><a href="http://localhost/php mvc com PDO TESTE/?pagina=sobre">Sobre</a></li>
        <li><a href="app/Template/news-magazine/pages/full-width.html">Full Width</a></li>
     <li><a href="#">Assunto</a>
          <ul>
		
            <li><a href="#">teste</a></li>
		
          </ul>
        </li>
     </ul>
    </div>
    <div id="search">
      <form action="#" method="post">
        <fieldset>
          <legend>Site Search</legend>
          <input type="text" value="Buscar no site "  onfocus="this.value=(this.value=='Buscar no site ')? '' : this.value ;" />
          <input type="submit" name="go" id="go" value="Buscar" />
        </fieldset>
      </form>
    </div>
	<div style="display:none;">
	<div id="dialog" title="Campo restrito">
 <div id="search">
      <form action="?pagina=login&metodo=logar" method="post">
        <fieldset>
          <legend>Site Search</legend>
          <input type="password" name="senha" placeholder="Informe senha de acesso" required />
          <input type="submit"  id="restrito" value="Acessar" />
        </fieldset>
      </form>
    </div>
</div></div>
<div style="display:none;">
	<div id="cadUser" title="Cadastro Login">
 <div id="search">
      <form action="?pagina=login&metodo=cadUser" method="post">
        <fieldset>
          <legend>Site Search</legend>
          <input type="text" name="nome" placeholder="Informe seu nome" required />
          <input style="margin-top:10px;" name="email" type="email" placeholder="Informe e-mail" required />
          
		  <input type="submit" id="cad" value="Cadastrar" />
        </fieldset>
      </form>
    </div>
</div>
</div>
    <br class="clear" />
  </div>
</div>


<!-- ####################################################################################################### -->

<div id="conteudo" >



				{{area_dinamica}}

			</div>

	
  
 <div id="socialise">
  <div id="newsletter">
      <h2>Seja informado diariamente!</h2>
      <p>Por favor , informe e-mail e nome</p>
      <form action="?pagina=login&metodo=logar" method="post">
        <fieldset>
          <legend>Newsletter</legend>
          <div class="fl_left">
            <input type="text" name="nome" value="Nome"  onfocus="this.value=(this.value=='Nome')? '' : this.value ;" />
            <input type="text" name="email" value="E-mail"  onfocus="this.value=(this.value=='E-mail')? '' : this.value ;" />
          </div>
          <div class="fl_right">
            <input type="submit" name="newsletter_go" id="newsletter_go" value="&raquo;" />
          </div>
        </fieldset>
      </form>
      <p>Cadastrar-se <a onclick="abrirCad();" href="#">Clique aqui&raquo;</a>.</p>
    </div>
   <div style="margin-top:10px" class="column">
     
     
      <div id="featured">
        <a href="#"> <img width="302" height="500" src="app/Template/news-magazine/images/demo/gif1.crdownload" alt="" /></a>
         
      </div>
      
    </div>
    
	
	

	
	
 </div>
  
  <br class="clear" />
  
</div>





</body>

</html>